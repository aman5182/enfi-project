"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[565],{30495:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var a,s=n(30168),i=n(74165),r=n(15861),o=n(29439),u=n(72791),l=n(11377),p=n(81102),c=n(19601),d=n(31243),y=n(84471),m=n.p+"static/media/101-07.7c7c477640a38680e73e.png",b=n.p+"static/media/usdt.f27c383e3eb950421e13.png",f=n.p+"static/media/swapBG.bb55144b78aee9200c04.jpg",h=n.p+"static/media/exc.49a7075bb4775764ccce.png",g=n(65867),x=(n(59434),n(80184));var v=function(){var e=(0,u.useState)([]),t=(0,o.Z)(e,2),n=t[0],v=t[1],T=(0,u.useState)(""),w=(0,o.Z)(T,2),j=w[0],k=w[1],M=(0,u.useState)(""),S=(0,o.Z)(M,2),_=S[0],N=S[1],P=(0,u.useState)(""),Z=(0,o.Z)(P,2),A=Z[0],I=Z[1],E=(0,u.useState)(""),F=(0,o.Z)(E,2),D=F[0],O=F[1],U=(0,u.useState)(""),C=(0,o.Z)(U,2),K=(C[0],C[1],(0,u.useState)("")),q=(0,o.Z)(K,2),z=q[0],B=q[1],Q=(0,u.useState)(""),R=(0,o.Z)(Q,2),V=R[0],W=R[1],G=(0,u.useState)(""),H=(0,o.Z)(G,2),L=H[0],J=H[1];(0,u.useEffect)((function(){fetch("http://localhost:5000/user-api/get-enfi-price").then((function(e){return e.json()})).then((function(e){J(e)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,u.useEffect)((function(){var e=localStorage.getItem("FK_MemId");e&&B(e)}),[]),(0,u.useEffect)((function(){d.Z.get("http://localhost:5000/user-api/get-package").then((function(e){e.data&&Array.isArray(e.data.data)?v(e.data.data):console.error("Invalid response data:",e.data)})).catch((function(e){console.error("Error fetching user data:",e)}))}),[]);var X=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var t,n,a,s,r,o,u,y;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.ethereum){e.next=35;break}return e.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:if(t=new l.Q(window.ethereum),n=t.getSigner(),!(isNaN(j)||parseFloat(j)<=0)){e.next=9;break}return console.error("Invalid enfiAmount provided."),e.abrupt("return");case 9:return"0x55d398326f99059ff775485246999027b3197955",a=[{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOwner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],s=new p.CH("0x55d398326f99059ff775485246999027b3197955",a,n),r=c.vz(_.toString(),18),e.next=15,s.balanceOf(n.getAddress());case 15:if(!e.sent.lt(r)){e.next=20;break}return console.error("Insufficient USDT balance."),alert("Insufficient USDT balance. Please make sure you have enough USDT."),e.abrupt("return");case 20:return e.next=22,s.transfer("0x2107d9e4c9FaFFAfEa6d0A987BD70E430a7CdbDd",r);case 22:return o=e.sent,e.next=25,o.wait();case 25:return console.log("USDT Transaction successful:",o.hash),"http://localhost:5000/user-api/buy-enfi-token",u={FK_MemId:z,RequestQty:_,FK_PackageId:D,PackageName:V,MinQty:j,ActionType:"Buy Request",USDTEquivalent:_},e.next=30,d.Z.post("http://localhost:5000/user-api/buy-enfi-token",u);case 30:y=e.sent,console.log("API Response:",y.data),I("Transaction and data storage successful."),e.next=36;break;case 35:console.log("Ethereum wallet (MetaMask) not available.");case 36:e.next=42;break;case 38:e.prev=38,e.t0=e.catch(0),console.error("Error performing USDT transaction:",e.t0),alert("Error performing USDT transaction. Please try again later.");case 42:case"end":return e.stop()}}),e,null,[[0,38]])})));return function(){return e.apply(this,arguments)}}(),Y=g.ZP.select(a||(a=(0,s.Z)(["\n    ","\n    text-align: left;\n    padding: 10px;\n    ","\n    border: none;\n    border-bottom: 3px solid #7f4eb5;\n    border-radius: 0;\n    background-color: transparent;\n    color: #fff;\n    font-size: 16px;\n    min-width: 10vw;\n    outline: none;\n    cursor: pointer;\n    transition: border-bottom 0.3s ease;\n    ","\n    /* Remove the default dropdown arrow */\n\n    option {\n      padding: 10px; /* Add padding to the options */\n      background-color: #3c215e;\n      color: #fff;\n    }\n  "])),"","","");return(0,x.jsx)("div",{className:"d-flex justify-content-center align-items-center h",children:(0,x.jsxs)("div",{className:" text-white col-12 col-md-8 buyenfi-main pb-3",style:{backgroundImage:"url(".concat(f,")"),backgroundSize:"cover"},children:[(0,x.jsx)("div",{className:"py-2 h1",style:{color:"white",fontSize:"1.6rem",fontWeight:"bolder",marginLeft:"1rem"},children:"SWAP"}),(0,x.jsxs)("div",{className:"d-flex justify-content-center align-items-center flex-column ",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between w-75 bg align-items-center",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:[(0,x.jsx)("img",{src:m,height:33,alt:""}),(0,x.jsx)("label",{className:"label mx-2",htmlFor:"",children:"ENFI"})]}),(0,x.jsx)("div",{className:"",children:(0,x.jsxs)(Y,{value:D,onChange:function(e){var t=Number(e.target.value);O(t);var a=n.find((function(e){return e.PK_PackageId===t}));if(a){var s=a.MinQty;k(s),W(a.PackageName);var i=new y.O(s).dividedBy(L.data[0].USDTPrice).multipliedBy(L.data[0].EnfiPrice).toFixed(2);N(i)}else k(""),W(""),N("")},children:[(0,x.jsx)("option",{value:"",children:"Select Package"}),n.map((function(e){return(0,x.jsx)("option",{value:e.PK_PackageId,children:e.PackageName},e.PK_PackageId)}))]})})]}),(0,x.jsx)("img",{className:"my-1",src:h,alt:"",height:60,loading:"lazy"}),(0,x.jsxs)("div",{className:"d-flex justify-content-between bg w-75 align-items-center",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:[(0,x.jsx)("img",{src:b,height:28,alt:""}),(0,x.jsx)("label",{className:"label mx-2",htmlFor:"",children:"USDT"})]}),(0,x.jsx)("div",{className:"",children:(0,x.jsx)(Y,{disabled:!0,children:(0,x.jsxs)("option",{value:_,children:[" ",_," "]})})})]})]}),(0,x.jsx)("button",{disabled:!D||!j,onClick:X,className:"button-87 mx-auto mt-5",role:"button",children:"Confirm Swap"}),A&&(0,x.jsx)("p",{children:A})]})})}}}]);
//# sourceMappingURL=565.a662f3cb.chunk.js.map
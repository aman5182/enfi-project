{"version":3,"file":"static/js/565.a662f3cb.chunk.js","mappings":"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","sources":["views/directory/buyenfi/Buyenfi.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ethers } from 'ethers';\r\nimport axios from 'axios';\r\nimport { BigNumber } from 'bignumber.js';\r\nimport coin from 'src/assets/brand/101-07.png'\r\nimport './Buyenfi.scss'\r\nimport usdt from 'src/assets/brand/usdt.png'\r\nimport swapBG from 'src/assets/brand/swapBG.jpg'\r\nimport exc from 'src/assets/brand/exc.png'\r\nimport styled from 'styled-components'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nfunction Buyenfi () {\r\n\r\n \r\n  \r\n  const [packages, setPackages] = useState([]);\r\n  const [enfiAmount, setEnfiAmount] = useState(''); // ENFI amount\r\n  const [usdtAmount, setUsdtAmount] = useState(''); // USDT amount\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [selectedPackageId, setSelectedPackageId] = useState('');\r\n  const [amountUSDT, setAmountUSDT] = useState('');\r\n  const [FK_MemId, setFK_MemId] = useState('');\r\n  const [packageName, setPackageName] = useState('');\r\n  const [priceData, setPriceData] = useState('');\r\n  // console.log(priceData)\r\n  const recipientAddress = '0x2107d9e4c9FaFFAfEa6d0A987BD70E430a7CdbDd';\r\n  \r\n\r\n\r\n  \r\n  useEffect(() => {\r\n    fetch('http://localhost:5000/user-api/get-enfi-price')\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setPriceData(data);\r\n        // console.log(data)\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error fetching data:', error);\r\n      });\r\n  }, []); \r\n\r\n   // Fetch FK_MemId from local storage on component mount\r\n  useEffect(() => {\r\n    const storedFK_MemId = localStorage.getItem('FK_MemId');\r\n    if (storedFK_MemId) {\r\n      setFK_MemId(storedFK_MemId);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Make an HTTP GET request to fetch user data from the Node.js API\r\n    axios.get('http://localhost:5000/user-api/get-package')\r\n      .then((response) => {\r\n        // Check if the response contains the expected properties\r\n        if (response.data && Array.isArray(response.data.data)) {\r\n          setPackages(response.data.data); // Use response.data.data as the array\r\n        } else {\r\n          console.error('Invalid response data:', response.data);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error fetching user data:', error);\r\n      });\r\n  }, []);\r\n  \r\n  const handlePackageSelection = (event) => {\r\n    const selectedId = Number(event.target.value);\r\n    setSelectedPackageId(selectedId);\r\n\r\n    const selectedPackage = packages.find((pkg) => pkg.PK_PackageId === selectedId);\r\n    if (selectedPackage) {\r\n      const enfiAmount = selectedPackage.MinQty;\r\n      setEnfiAmount(enfiAmount);\r\n      setPackageName(selectedPackage.PackageName); // Set PackageName when a package is selected\r\n\r\n        \r\n   const usdtEquivalent = new BigNumber(enfiAmount)\r\n   .dividedBy(priceData.data[0].USDTPrice) // Divide by the ENFI to USDT conversion rate\r\n   .multipliedBy(priceData.data[0].EnfiPrice) // Multiply by the USDT value\r\n   \r\n   .toFixed(2); // Adjust the decimal places as needed\r\n setUsdtAmount(usdtEquivalent);\r\n    } else {\r\n      setEnfiAmount('');\r\n      setPackageName('');\r\n      setUsdtAmount('');\r\n     \r\n    }\r\n  };\r\n \r\n  const performTransaction = async () => {\r\n    try {\r\n      // Connect to Binance Smart Chain (BSC) using MetaMask or similar provider\r\n      if (window.ethereum) {\r\n        await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n        const signer = provider.getSigner();\r\n\r\n        // Ensure a valid numeric enfiAmount is provided\r\n        if (isNaN(enfiAmount) || parseFloat(enfiAmount) <= 0) {\r\n          console.error('Invalid enfiAmount provided.');\r\n          \r\n          return;\r\n        }\r\n        \r\n\r\n        // Create a contract instance for the USDT token\r\n        const usdtContractAddress = '0x55d398326f99059ff775485246999027b3197955'; // Replace with the actual USDT contract address\r\n        const usdtContractABI =[{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"constant\":true,\"inputs\":[],\"name\":\"_decimals\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"_name\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"_symbol\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"}],\"name\":\"allowance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"burn\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"decimals\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"subtractedValue\",\"type\":\"uint256\"}],\"name\":\"decreaseAllowance\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getOwner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"addedValue\",\"type\":\"uint256\"}],\"name\":\"increaseAllowance\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"mint\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]\r\n\r\n        const usdtContract = new ethers.Contract(usdtContractAddress, usdtContractABI, signer);\r\n\r\n        // Convert usdtAmount to 18 decimal places\r\n        const usdtAmountWith18Decimals = ethers.utils.parseUnits(usdtAmount.toString(), 18);\r\n  \r\n        // Check the user's USDT balance\r\n        const userUsdtBalance = await usdtContract.balanceOf(signer.getAddress());\r\n  \r\n        if (userUsdtBalance.lt(usdtAmountWith18Decimals)) {\r\n          console.error('Insufficient USDT balance.');\r\n          alert('Insufficient USDT balance. Please make sure you have enough USDT.');\r\n  \r\n          return;\r\n        }\r\n  \r\n        // Continue with the transfer\r\n        const txResponse = await usdtContract.transfer(recipientAddress, usdtAmountWith18Decimals);\r\n        await txResponse.wait();\r\n  \r\n        console.log('USDT Transaction successful:', txResponse.hash);\r\n  \r\n        // Now, make an API call to your backend\r\n        const apiEndpoint = 'http://localhost:5000/user-api/buy-enfi-token';\r\n        const requestData = {\r\n          FK_MemId: FK_MemId,\r\n          RequestQty: usdtAmount,\r\n          FK_PackageId: selectedPackageId,\r\n         PackageName: packageName, // Include PackageName\r\n          MinQty: enfiAmount,\r\n          ActionType: 'Buy Request',\r\n          USDTEquivalent: usdtAmount,\r\n        };\r\n \r\n        const apiResponse = await axios.post(apiEndpoint, requestData);\r\n        console.log('API Response:', apiResponse.data);\r\n\r\n        setSuccessMessage('Transaction and data storage successful.');\r\n      } else {\r\n        console.log('Ethereum wallet (MetaMask) not available.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error performing USDT transaction:', error);\r\n      alert('Error performing USDT transaction. Please try again later.');\r\n    }\r\n  };\r\n  const CustomSelect = styled.select`\r\n    ${'' /* box-sizing: border-box; */}\r\n    text-align: left;\r\n    padding: 10px;\r\n    ${'' /* background-color: red; */}\r\n    border: none;\r\n    border-bottom: 3px solid #7f4eb5;\r\n    border-radius: 0;\r\n    background-color: transparent;\r\n    color: #fff;\r\n    font-size: 16px;\r\n    min-width: 10vw;\r\n    outline: none;\r\n    cursor: pointer;\r\n    transition: border-bottom 0.3s ease;\r\n    ${'' /* appearance: none; */}\r\n    /* Remove the default dropdown arrow */\r\n\r\n    option {\r\n      padding: 10px; /* Add padding to the options */\r\n      background-color: #3c215e;\r\n      color: #fff;\r\n    }\r\n  `\r\n\r\n \r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center align-items-center h\">\r\n      <div\r\n        className=\" text-white col-12 col-md-8 buyenfi-main pb-3\"\r\n        style={{ backgroundImage: `url(${swapBG})`, backgroundSize: 'cover' }}\r\n      >\r\n        <div\r\n          className=\"py-2 h1\"\r\n          style={{ color: 'white', fontSize: '1.6rem', fontWeight: 'bolder', marginLeft: '1rem' }}\r\n        >\r\n         SWAP\r\n        </div>\r\n        <div className=\"d-flex justify-content-center align-items-center flex-column \">\r\n          <div className=\"d-flex justify-content-between w-75 bg align-items-center\">\r\n            <div className=\"d-flex align-items-center justify-content-start\">\r\n              <img src={coin} height={33} alt=\"\" />\r\n              <label className=\"label mx-2\" htmlFor=\"\">\r\n               ENFI\r\n              </label>\r\n            </div>\r\n            <div className=\"\">\r\n              {/* <select style={{ color: '#ffc919', fontSize: '1.2rem', fontWeight: '500' }}>\r\n                <option value=\"\" disabled selected>\r\n                  Amount\r\n                </option>\r\n                <option value=\"Option 1\">50</option>\r\n                <option value=\"Option 2\">100</option>\r\n                <option value=\"Option 3\">150</option>\r\n              </select> */}\r\n              {/* <CustomSelectWrapper> */}\r\n              <CustomSelect value={selectedPackageId} onChange={handlePackageSelection}>\r\n              <option value=\"\">Select Package</option>\r\n             {packages.map((pkg) => (\r\n              <option key={pkg.PK_PackageId} value={pkg.PK_PackageId}>\r\n              {pkg.PackageName}\r\n              {/* <p value={enfiAmount} > {enfiAmount} </p> */}\r\n              </option>\r\n              \r\n            ))}\r\n              </CustomSelect>\r\n              {/* <CustomSelectIcon>&#9660;</CustomSelectIcon> */}\r\n              {/* </CustomSelectWrapper> */}\r\n            </div>\r\n          </div>\r\n          <img className=\"my-1\" src={exc} alt=\"\" height={60} loading=\"lazy\" />\r\n          <div className=\"d-flex justify-content-between bg w-75 align-items-center\">\r\n            <div className=\"d-flex align-items-center justify-content-start\">\r\n              <img src={usdt} height={28} alt=\"\" />\r\n              <label className=\"label mx-2\" htmlFor=\"\">\r\n            USDT\r\n              </label>\r\n            </div>\r\n            <div className=\"\">\r\n              {/* <CustomSelectWrapper> */}\r\n              <CustomSelect disabled>\r\n              <option value={usdtAmount} > {usdtAmount} </option>\r\n              </CustomSelect>\r\n               {/* </CustomSelectWrapper> */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <button disabled={!selectedPackageId || !enfiAmount} onClick={performTransaction} \r\n        className=\"button-87 mx-auto mt-5\" role=\"button\">\r\n          Confirm Swap\r\n        </button> \r\n        {successMessage && <p>{successMessage}</p>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Buyenfi\r\n"],"names":["_useState","useState","_useState2","_slicedToArray","packages","setPackages","_useState3","_useState4","enfiAmount","setEnfiAmount","_useState5","_useState6","usdtAmount","setUsdtAmount","_useState7","_useState8","successMessage","setSuccessMessage","_useState9","_useState10","selectedPackageId","setSelectedPackageId","_useState11","_useState12","_useState13","_useState14","FK_MemId","setFK_MemId","_useState15","_useState16","packageName","setPackageName","_useState17","_useState18","priceData","setPriceData","useEffect","fetch","then","response","json","data","catch","error","console","storedFK_MemId","localStorage","getItem","axios","get","Array","isArray","performTransaction","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","provider","signer","usdtContractABI","usdtContract","usdtAmountWith18Decimals","txResponse","requestData","apiResponse","wrap","_context","prev","next","window","ethereum","request","method","ethers","getSigner","isNaN","parseFloat","abrupt","toString","balanceOf","getAddress","sent","lt","alert","transfer","wait","log","hash","RequestQty","FK_PackageId","PackageName","MinQty","ActionType","USDTEquivalent","post","t0","stop","apply","arguments","CustomSelect","styled","select","_templateObject","_taggedTemplateLiteral","_jsx","className","children","_jsxs","style","backgroundImage","concat","swapBG","backgroundSize","color","fontSize","fontWeight","marginLeft","src","coin","height","alt","htmlFor","value","onChange","event","selectedId","Number","target","selectedPackage","find","pkg","PK_PackageId","usdtEquivalent","BigNumber","dividedBy","USDTPrice","multipliedBy","EnfiPrice","toFixed","map","exc","loading","usdt","disabled","onClick","role"],"sourceRoot":""}